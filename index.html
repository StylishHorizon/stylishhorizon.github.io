<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Stylish Horizon</title>
  <meta name="description" content="Digital restoration with integrity. No hype. No noise. Just memory.">
  <link rel="icon" href="assets/media/favicon.ico" type="image/x-icon">
  <!-- Google Fonts: Inter -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;500;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-a: #111217;
      --bg-b: #0a0b0f;
      --bg-c: #050609;
      --glass: rgba(14,18,20,0.87);
      --txt: #f3f3f3;
      --muted: #b8bec6;
      --accent: #6cb6ff;
      --shadow: 0 8px 28px rgba(0,0,0,.32);
      --nav-shadow: 0 1px 0 rgba(255,255,255,.08);
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: var(--txt);
      line-height: 1.75;
      background: radial-gradient(1600px 1200px at 50% 50%, var(--bg-a) 0%, var(--bg-b) 40%, var(--bg-c) 100%);
      background-attachment: fixed;
      background-size: 200% 200%;
      animation: bgMove 24s ease-in-out infinite;
      scroll-behavior: smooth;
      overflow-x: hidden;
    }
    @keyframes bgMove {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    body::before {
      content: "";
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 0;
      background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='160' height='160'><filter id='n'><feTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='2'/></filter><rect width='160' height='160' filter='url(%23n)' opacity='0.11'/></svg>");
      background-size: 160px 160px;
      opacity: .07;
      mix-blend-mode: overlay;
    }
    nav {
      position: fixed;
      top: 0; left: 0; right: 0;
      z-index: 1000;
      background: var(--glass);
      backdrop-filter: blur(7px);
      box-shadow: var(--nav-shadow);
      transition: transform .5s, opacity .5s;
      will-change: transform, opacity;
    }
    nav.hidden { transform: translateY(-100%); opacity: 0; pointer-events: none; }

    .nav-container {
      max-width: 1100px;
      margin: 0 auto;
      padding: .5rem 1.5rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 2rem;
    }
    .logo-title {
      display: flex;
      align-items: center;
      gap: .5rem;
      cursor: pointer;
      user-select: none;
      text-decoration: none;
    }
    .logo {
      width: 108px;
      height: auto;
      display: block;
      filter: drop-shadow(0 2px 8px rgba(0,0,0,.32));
      opacity: 0;
      transform: scale(0.95);
      animation: fadeInLogo 2.2s cubic-bezier(.19,1,.22,1) forwards;
    }
    @keyframes fadeInLogo {
      to { opacity: 1; transform: scale(1); }
    }
    .site-title {
      margin: 0;
      font-size: 1.22rem;
      font-weight: 500;
      letter-spacing: .2px;
      opacity: .89;
      color: var(--muted);
    }
    .nav-links {
      display: flex;
      gap: 1.5rem;
      align-items: center;
    }
    .nav-links a {
      color: var(--txt);
      text-decoration: none;
      font-weight: 500;
      padding: .4rem .8rem;
      border-radius: .5rem;
      transition: background .22s, color .22s, box-shadow .2s;
      position: relative;
      opacity: .93;
    }
    .nav-links a:hover {
      background: rgba(108,182,255,.09);
      color: var(--accent);
      box-shadow: 0 0 6px rgba(108,182,255,.12);
    }
    .nav-links a.active {
      color: var(--accent);
      background: rgba(108,182,255,.07);
      opacity: .96;
    }
    #burger {
      display: none;
      background: none;
      border: 0;
      color: var(--txt);
      font-size: 2.1rem;
      cursor: pointer;
      line-height: 1;
      padding: .25rem .7rem;
      border-radius: .7rem;
      transition: background .15s;
    }
    #burger:focus-visible {
      outline: 2px solid var(--accent);
      outline-offset: 2px;
      background: rgba(108,182,255,.13);
    }

    /* Мобильная навигация */
    @media (max-width: 900px) {
      .nav-container { gap: 1rem; padding: .5rem 1rem; }
    }
    @media (max-width: 768px) {
      .nav-links {
        position: absolute;
        top: 100%; left: 0; right: 0;
        background: var(--glass);
        backdrop-filter: blur(10px);
        flex-direction: column;
        gap: .5rem;
        padding: 1rem .5rem;
        transform-origin: top;
        transform: scaleY(0.97);
        opacity: 0;
        pointer-events: none;
        box-shadow: var(--shadow);
        border-bottom-left-radius: 14px;
        border-bottom-right-radius: 14px;
        transition: opacity .25s, transform .25s;
      }
      .nav-links.show {
        opacity: 1;
        transform: scaleY(1);
        pointer-events: auto;
      }
      #burger { display: block; }
      .site-title { font-size: 1.07rem; }
      .logo { width: 84px; }
    }
    /* Fullscreen в landscape на мобилах */
    @media (max-width: 768px) and (orientation: landscape) {
      html, body {
        min-height: 100vw;
        height: 100vw;
        background: var(--bg-b);
      }
      nav, main, footer {
        max-width: 100vw;
      }
    }

    main {
      padding-top: 68px;
      min-height: 100vh;
      width: 100%;
      max-width: 900px;
      margin: 0 auto;
      padding-left: 24px;
      padding-right: 24px;
    }
    .spacer { height: 6vw; min-height: 32px; }
    section {
      position: relative;
      z-index: 1;
      margin: 0 auto;
      margin-bottom: 0;
      padding: 2rem 1.5rem;
      background: transparent;
      border-radius: 12px;
      /* без border, только тень если надо */
      box-shadow: none;
      opacity: 0;
      transform: translateY(24px) scale(.985);
      transition: opacity .7s cubic-bezier(.19,1,.22,1), transform .7s;
      will-change: transform, opacity;
    }
    section.visible {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
    section h2 {
      margin-top: 0;
      font-size: 2.1rem;
      font-weight: 700;
      color: var(--accent);
      letter-spacing: .5px;
      margin-bottom: .8rem;
      background: none;
      border: none;
    }
    section p { margin: .7rem 0; font-size: 1.13rem; }
    section:hover { transform: translateY(-1px) scale(1.018); }
    .placeholder { display: none; }

    footer {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: .7rem;
      padding: 2rem;
      font-size: .98rem;
      color: #bbb;
      opacity: 0;
      transform: translateY(10px);
      transition: opacity 1s, transform 1s;
    }
    footer.visible {
      opacity: 1;
      transform: translateY(0);
    }
    footer img {
      width: 26px;
      height: auto;
      filter: drop-shadow(0 1px 4px rgba(0,0,0,.5));
    }
    @media (max-width: 768px) {
      section { padding: 1.1rem .5rem; }
      main { padding-left: 8px; padding-right: 8px; }
    }
    @media (prefers-reduced-motion: reduce) {
      * {
        animation-duration: 0.001ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.001ms !important;
        scroll-behavior: auto !important;
      }
      body { animation: none !important; background-position: 50% 50% !important; }
      .logo-title:hover, section:hover { transform: none !important; }
    }
  </style>
</head>
<body>
  <nav id="site-nav">
    <div class="nav-container">
      <a class="logo-title" href="index.html" aria-label="Go to home">
        <picture>
          <source srcset="assets/media/StylishHorizon_Clear.webp" type="image/webp">
          <img class="logo" src="assets/media/StylishHorizon_Black.png" loading="lazy" alt="Stylish Horizon Logo" width="108" height="40" />
        </picture>
        <p class="site-title">Stylish Horizon</p>
      </a>
      <button id="burger" aria-label="Open menu" aria-controls="primary-navigation" aria-expanded="false">&#9776;</button>
      <div id="primary-navigation" class="nav-links" role="navigation" aria-label="Primary">
        <a href="index.html" class="active" aria-current="page">Home</a>
        <a href="manifest.html">Manifest</a>
        <a href="archive.html">Archive</a>
        <a href="contact.html">Contact</a>
      </div>
    </div>
  </nav>
  <main>
    <header aria-hidden="true"></header>
    <section class="hero" data-order="1">
      <p>Digital restoration with integrity</p>
      <p>No hype. No noise. Just memory.</p>
      <p>We restore MiniDV, VHS, Hi8, and forgotten drives.</p>
    </section>
    <div class="spacer"></div>
    <section class="how" data-order="3">
      <h2>How we work</h2>
      <!-- Только заголовок при первом появлении, текст позже -->
      <div class="how-content" style="opacity:0;transition:opacity .7s;"></div>
    </section>
    <div class="spacer"></div>
    <section class="what" data-order="2">
      <h2>What we do</h2>
      <p>We restore MiniDV, VHS, Hi8, and forgotten drives.</p>
      <p>If it still breathes — we help it speak again.</p>
      <p>Every file is reviewed manually. Not filters, not nostalgia — just truth.</p>
    </section>
    <div class="spacer"></div>
    <section class="why" data-order="5">
      <h2>Why it matters</h2>
      <p>We believe memory deserves clarity.</p>
      <p>Not filters, not nostalgia — just truth.</p>
    </section>
    <!-- Placeholder для будущей CTA -->
    <section class="cta" data-order="4" style="display:none;">
      <h2>Private restoration session</h2>
      <p>Contact for details. (CTA placeholder)</p>
    </section>
  </main>
  <footer>
    <img src="assets/media/StylishHorizon_Clear.webp" alt="Logo" />
    <p>© <span id="year"></span> Stylish Horizon</p>
  </footer>
  <script>
    // Управление порядком проявления секций
    const hero = document.querySelector('.hero');
    const how = document.querySelector('.how');
    const howContent = how.querySelector('.how-content');
    const what = document.querySelector('.what');
    const why = document.querySelector('.why');
    const cta = document.querySelector('.cta');
    const footer = document.querySelector('footer');

    // Секции только заголовки, потом контент
    const howText = `
      <p>No shipping. We find trusted studios near you.</p>
      <p>No subscriptions. You pay for what you need — nothing more.</p>
    `;

    function reveal(el, delay = 0, content = null) {
      setTimeout(() => {
        el.classList.add('visible');
        if (content && el.querySelector('.how-content')) {
          setTimeout(() => {
            el.querySelector('.how-content').style.opacity = 1;
            el.querySelector('.how-content').innerHTML = content;
          }, 500);
        }
      }, delay);
    }

    // Порядок проявления: hero → how (только заголовок) → what → how (контент) → why → футер → cta (через 2 сек после простоя)
    reveal(hero, 200);
    reveal(how, 700);
    reveal(what, 1400);
    setTimeout(() => {
      howContent.innerHTML = howText;
      howContent.style.opacity = 1;
    }, 2100);
    reveal(why, 2700);
    setTimeout(() => {
      footer.classList.add('visible');
    }, 3200);
    // CTA появляется через 2 сек после футера
    setTimeout(() => {
      cta.style.display = '';
      cta.classList.add('visible');
    }, 5200);

    // Навигация: скрывать вниз / показывать вверх (после ~70px)
    const nav = document.getElementById('site-nav');
    let lastY = window.pageYOffset || document.documentElement.scrollTop;
    let revealLock = 0;
    window.addEventListener('scroll', () => {
      const y = window.pageYOffset || document.documentElement.scrollTop;
      const delta = y - lastY;
      if (delta > 0) {
        nav.classList.add('hidden');
        revealLock = 0;
      } else if (delta < 0) {
        revealLock += Math.abs(delta);
        if (revealLock >= 70) {
          nav.classList.remove('hidden');
          revealLock = 0;
        }
      }
      lastY = y <= 0 ? 0 : y;
    }, { passive: true });

    // Бургер-меню с ARIA и UX-обработчиками
    const burger = document.getElementById('burger');
    const navLinks = document.getElementById('primary-navigation');
    function closeMenu() {
      navLinks.classList.remove('show');
      burger.setAttribute('aria-expanded', 'false');
      document.removeEventListener('keydown', handleEsc);
      document.removeEventListener('click', handleClickOutside, true);
    }
    function handleEsc(e) {
      if (e.key === 'Escape') closeMenu();
    }
    function handleClickOutside(e) {
      if (!navLinks.contains(e.target) && e.target !== burger) closeMenu();
    }
    burger?.addEventListener('click', () => {
      const isOpen = navLinks.classList.toggle('show');
      burger.setAttribute('aria-expanded', String(isOpen));
      if (isOpen) {
        document.addEventListener('keydown', handleEsc);
        document.addEventListener('click', handleClickOutside, true);
      } else {
        document.removeEventListener('keydown', handleEsc);
        document.removeEventListener('click', handleClickOutside, true);
      }
    });
    navLinks?.querySelectorAll('a').forEach(a=>{
      a.addEventListener('click', () => {
        if (window.matchMedia('(max-width: 768px)').matches) {
          navLinks.classList.remove('show');
          burger.setAttribute('aria-expanded','false');
        }
      });
    });

    // Активный пункт меню
    (function markActive(){
      const path = (location.pathname.split('/').pop() || 'index.html').toLowerCase();
      document.querySelectorAll('.nav-links a').forEach(a=>{
        const href = a.getAttribute('href')?.toLowerCase() || '';
        if ((path === 'index.html' && href.endsWith('index.html')) || href.endsWith(path)) {
          a.classList.add('active'); a.setAttribute('aria-current','page');
        }
      });
    })();

    // Динамический год в футере
    document.getElementById('year').textContent = new Date().getFullYear();

    // Smooth scroll по якорям (если появятся)
    document.querySelectorAll('a[href^="#"]').forEach(anchor=>{
      anchor.addEventListener('click', (e)=>{
        const target = document.querySelector(anchor.getAttribute('href'));
        if (target){ e.preventDefault(); target.scrollIntoView({behavior:'smooth', block:'start'}); }
      });
    });

    // ВАЖНО: фон «дышит» только через @keyframes bgMove
  </script>
</body>
</html>
